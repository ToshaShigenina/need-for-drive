"use strict";(self["webpackChunkneed_for_drive"]=self["webpackChunkneed_for_drive"]||[]).push([[519],{4888:function(e,t,r){r.d(t,{Z:function(){return c}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order"},[r("h2",{staticClass:"order__heading"},[e._v("Ваш заказ:")]),r("ul",{staticClass:"order__list"},[r("li",{staticClass:"order__item"},[r("span",[e._v(e._s(e.point.label))]),r("span",[e._v(" "+e._s(e.city.value.name)),e.city.value.id&&e.point.value.id?r("br"):e._e(),e._v(" "+e._s(e.point.value.address)+" ")])]),e.model.value.id?r("li",{key:"order-model",staticClass:"order__item"},[r("span",[e._v(e._s(e.model.label))]),r("span",[e._v(" "+e._s(e.model.value.name)+" ")])]):e._e(),e.color.value?r("li",{key:"order-color",staticClass:"order__item"},[r("span",[e._v(e._s(e.color.label))]),r("span",[e._v(" "+e._s(e.color.value)+" ")])]):e._e(),e.period.value.dateFrom&&e.period.value.dateTo?r("li",{key:"order-period",staticClass:"order__item"},[r("span",[e._v(e._s(e.period.label))]),r("span",[e._v(" "+e._s(e.periodValue)+" ")])]):e._e(),e.rate.value.id?r("li",{key:"order-rate",staticClass:"order__item"},[r("span",[e._v(e._s(e.rate.label))]),r("span",[e._v(" "+e._s(e.rate.value.rateTypeId.name)+" ")])]):e._e(),e.fullTank?r("li",{key:"full-tank",staticClass:"order__item"},[r("span",[e._v(e._s(e.fullTank.label))]),r("span",[e._v("Да")])]):e._e(),e.childChair?r("li",{key:"child-chair",staticClass:"order__item"},[r("span",[e._v(e._s(e.childChair.label))]),r("span",[e._v("Да")])]):e._e(),e.rightWheel?r("li",{key:"right-wheel",staticClass:"order__item"},[r("span",[e._v(e._s(e.rightWheel.label))]),r("span",[e._v("Да")])]):e._e()]),e.orderPrice?r("p",{staticClass:"order__result"},[r("strong",[e._v("Цена:")]),e._v(" "+e._s(e.orderPrice)+" ₽ ")]):e.model.value.id?r("p",{staticClass:"order__result"},[r("strong",[e._v("Цена:")]),e._v(" от "+e._s(e.model.value.priceMin)+" ₽ до "+e._s(e.model.value.priceMax)+" ₽ ")]):e._e(),e._t("btn")],2)},i=[],n=r(5333),a={name:"order-component",computed:{city:function(){return this.$store.getters.getOrderCity},point:function(){return this.$store.getters.getOrderPoint},model:function(){return this.$store.getters.getOrderModel},color:function(){return this.$store.getters.getOrderColor},period:function(){return this.$store.getters.getOrderPeriod},periodValue:function(){return this.$store.getters.getPeriod},rate:function(){return this.$store.getters.getOrderRate},serviceList:function(){return this.$store.getters.getOrderServiceList},fullTank:function(){return this.$store.getters.getOrderService("isFullTank")},childChair:function(){return this.$store.getters.getOrderService("isNeedChildChair")},rightWheel:function(){return this.$store.getters.getOrderService("isRightWheel")},orderPrice:function(){var e="62593c9d73b61100181028ed",t="627de9582d3c990011916cc1",r="62593cac73b61100181028ee",s="6271495e9093d200112245e8",i="62593cca73b61100181028ef",a="62593cd573b61100181028f0",o="6259003d73b61100181028d9",u="626ac00373b611001810412b",l="62593cf073b61100181028f1",c="62593d0273b61100181028f2",d="626ac3ae73b611001810412f",p=this.period.value.dateFrom,_=this.period.value.dateTo,h=0;if(p&&_&&this.rate.value.id){var v=(new Date((0,n.Q)(_)).getTime()-new Date((0,n.Q)(p)).getTime())/6e4,m=0;this.model.value.id&&(h=this.model.value.priceMin),this.fullTank&&(h+=this.fullTank.price),this.childChair&&(h+=this.childChair.price),this.rightWheel&&(h+=this.rightWheel.price),this.rate.value.id!==e&&this.rate.value.id!==t||(m=this.rate.value.price),this.rate.value.id===r&&(m=this.rate.value.price/1440),this.rate.value.id===s&&(m=this.rate.value.price/4320),this.rate.value.id!==i&&this.rate.value.id!==a||(m=this.rate.value.price/10080),this.rate.value.id===o&&(m=this.rate.value.price/43200),this.rate.value.id===u&&(m=this.rate.value.price/129600),this.rate.value.id===l&&(m=this.rate.value.price/133920),this.rate.value.id!==c&&this.rate.value.id!==d||(m=this.rate.value.price/525600),h+=Math.ceil(m*v)}return h}},watch:{orderPrice:function(e){this.$store.commit("setOrderPrice",e)}}},o=a,u=r(1001),l=(0,u.Z)(o,s,i,!1,null,"602cb64c",null),c=l.exports},3959:function(e,t,r){r.d(t,{Z:function(){return l}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"fade"}},[e.open?r("div",{staticClass:"popup",on:{click:function(t){return t.target!==t.currentTarget?null:e.closePopup.apply(null,arguments)}}},[r("div",{staticClass:"popup__content"},[r("h2",{staticClass:"popup__title text-center"},[e._t("title",(function(){return[e._v("Подтвердить заказ")]}))],2),e._t("success"),e.cancel?r("button",{staticClass:"btn btn_cancel popup__btn",on:{click:e.closePopup}},[e._t("cancel",(function(){return[e._v("Вернуться")]}))],2):e._e()],2)]):e._e()])},i=[],n={name:"popup-component",props:{open:{type:Boolean,default:!1},cancel:{type:Boolean,default:!0}},methods:{closePopup:function(){this.$emit("close-popup",!1)}}},a=n,o=r(1001),u=(0,o.Z)(a,s,i,!1,null,null,null),l=u.exports},2189:function(e,t,r){r.d(t,{Z:function(){return l}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content summary"},[r("div",{staticClass:"summary__order"},[e.id&&e.order&&e.order.orderStatusId&&e.order.orderStatusId.id===e.confirmStatus.id?r("h2",{staticClass:"summary__title"},[e._v(" Ваш заказ подтверждён ")]):e._e(),e.id&&e.order&&e.order.orderStatusId&&e.order.orderStatusId.id===e.cancelStatus.id?r("h2",{staticClass:"summary__title"},[e._v(" Ваш заказ отменён ")]):e._e(),r("h3",{staticClass:"summary__name"},[e._v(e._s(e.car.name))]),e.car.number?r("p",[r("span",{staticClass:"car-number"},[e._v(e._s(e.car.number))])]):e._e(),r("p",[r("strong",[e._v("Доступна с")]),e._v(" "+e._s(e.dateFrom)),r("br"),r("strong",[e._v("по")]),e._v(" "+e._s(e.dateTo)+" ")]),r("p",[r("strong",[e._v("Топливо")]),e._v(" "+e._s(e.tank||0)+"%")])]),e.car.thumbnail?r("div",{staticClass:"summary__car"},[r("img",{attrs:{src:e.car.thumbnail.path,alt:""}})]):e._e()])},i=[],n={name:"summary-component",props:{id:{type:String}},computed:{car:function(){return this.$store.getters.getOrderModel.value},dateFrom:function(){return this.$store.getters.getOrderDateFrom},dateTo:function(){return this.$store.getters.getOrderDateTo},fullTank:function(){return this.$store.getters.getOrderService("isFullTank")},tank:function(){return this.fullTank?100:this.car.tank},order:function(){return this.$store.getters.getOrder},confirmStatus:function(){return this.$store.getters.getConfirmStatus},cancelStatus:function(){return this.$store.getters.getCancelStatus}}},a=n,o=r(1001),u=(0,o.Z)(a,s,i,!1,null,"bdd0ce3e",null),l=u.exports},2519:function(e,t,r){r.r(t),r.d(t,{default:function(){return _}});var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper wrapper_inner"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("header-component")],1),r("div",{staticClass:"heading-bordered"},[r("p",[e._v("Заказ номер "+e._s(this.$route.query.id))])]),r("div",{staticClass:"row justify-content-between"},[r("div",{staticClass:"col-md-64 col-sm-60 col-100"},[r("summary-component",{attrs:{id:this.$route.query.id}})],1),r("div",{staticClass:"col-md-36 col-sm-40 col-100"},[r("order-component",{scopedSlots:e._u([{key:"btn",fn:function(){return[e.order&&e.order.orderStatusId&&e.order.orderStatusId.id===e.confirmStatus.id?r("button",{staticClass:"btn btn_cancel mw-100",attrs:{type:"button"},on:{click:function(t){return e.togglePopup(!0)}}},[e._v(" Отменить ")]):e._e(),e.order&&e.order.orderStatusId&&e.order.orderStatusId.id===e.cancelStatus.id?r("router-link",{staticClass:"btn mw-100",attrs:{to:"/"}},[e._v(" На главную ")]):e._e()]},proxy:!0}])})],1)])]),r("popup-component",{attrs:{open:e.popupOpen},on:{"close-popup":e.togglePopup},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Отменить заказ ")]},proxy:!0},{key:"success",fn:function(){return[r("button",{staticClass:"btn popup__btn",on:{click:e.cancelOrder}},[e._v("Отменить")])]},proxy:!0}])}),r("popup-component",{attrs:{open:e.popupResult,cancel:!1},on:{"close-popup":e.toggleResult},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(" Заказ "+e._s(e.$route.query.id)+" был отменен ")]},proxy:!0},{key:"success",fn:function(){return[r("router-link",{staticClass:"btn popup__btn",attrs:{to:"/"}},[e._v(" На главную ")])]},proxy:!0}])})],1)},i=[],n=(r(4916),r(5306),r(8763)),a=r(2189),o=r(4888),u=r(3959),l={name:"OrderView",components:{HeaderComponent:n.Z,SummaryComponent:a.Z,OrderComponent:o.Z,PopupComponent:u.Z},data:function(){return{popupOpen:!1,popupResult:!1}},computed:{order:function(){return this.$store.getters.getOrder},confirmStatus:function(){return this.$store.getters.getConfirmStatus},cancelStatus:function(){return this.$store.getters.getCancelStatus}},methods:{togglePopup:function(e){this.popupOpen=e},toggleResult:function(e){this.popupResult=e},cancelOrder:function(){var e=this;this.$store.dispatch("cancelOrder").then((function(){e.togglePopup(!1),e.toggleResult(!0)}))}},created:function(){this.$store.dispatch("loadOrderStatuses"),this.$route.query.id?this.$store.dispatch("loadOrder",this.$route.query.id):this.$router.replace("error")}},c=l,d=r(1001),p=(0,d.Z)(c,s,i,!1,null,"6318cebd",null),_=p.exports}}]);
//# sourceMappingURL=519-legacy.387b4724.js.map